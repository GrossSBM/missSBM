<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to missSBM • missSBM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to missSBM">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">missSBM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a>
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introdution-to-misssbm.html">Introduction to missSBM</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jchiquet/missSBM">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to missSBM</h1>
                        <h4 class="author">missSBM team</h4>
            
            <h4 class="date">2019-03-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jchiquet/missSBM/blob/master/vignettes/introdution-to-misssbm.Rmd"><code>vignettes/introdution-to-misssbm.Rmd</code></a></small>
      <div class="hidden name"><code>introdution-to-misssbm.Rmd</code></div>

    </div>

    
    
<div id="requirement" class="section level2">
<h2 class="hasAnchor">
<a href="#requirement" class="anchor"></a>Requirement</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(igraph)</a></code></pre></div>
<pre><code>## 
## Attaching package: 'igraph'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     decompose, spectrum</code></pre>
<pre><code>## The following object is masked from 'package:base':
## 
##     union</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(missSBM)</a></code></pre></div>
<pre><code>## 
## Attaching package: 'missSBM'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     simulate, smooth</code></pre>
<pre><code>## The following object is masked from 'package:base':
## 
##     sample</code></pre>
</div>
<div id="war-network" class="section level2">
<h2 class="hasAnchor">
<a href="#war-network" class="anchor"></a>War network</h2>
<p>The <code>war_graphs</code> dataset comes with the <code>missSBM</code> package:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"war_graphs"</span>)</a></code></pre></div>
<p>This dataset contains a list of two networks where the nodes are countries and an edge in network <code>beligerent</code> means that the two countries have been at least once at war between years 1816 to 2007 while an edge in network <code>alliance</code> means that the two countries have had a formal alliance between years 1816 to 2012. The network <code>beligerent</code> have less nodes since countries which have not been at war are not considered. These two networs were extracted from <strong><a href="http://www.correlatesofwar.org/" class="uri">http://www.correlatesofwar.org/</a></strong> (version 4.0 for war data see <em>Sarkees, Meredith Reid and Frank Wayman (2010). Resort to War: 1816 - 2007. Washington DC: CQ Press.</em>, version 4.1 for formal alliance see <em>Gibler, Douglas M. 2009. International military alliances, 1648-2008. CQ Press.</em>).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(war_graphs<span class="op">$</span>alliance   , <span class="dt">main =</span> <span class="st">"Alliance"</span>)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/plot-1.png" width="1920"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(war_graphs<span class="op">$</span>beligerent , <span class="dt">main =</span> <span class="st">"Beligerent"</span>)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/plot-2.png" width="1920"></p>
<div id="missing-data" class="section level3">
<h3 class="hasAnchor">
<a href="#missing-data" class="anchor"></a>Missing data</h3>
<p>Some data may be missing for some countries in the sense that data were collected comprehensively for a subset of countries and for the other countries we only observe their edges with the first subset and not within them. More precisely, we can assume that the sampling is node-centered, therefore there is block of missing data on the diagonal of the adjacency matrix.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">sampledNet_war &lt;-<span class="st"> </span>war_graphs<span class="op">$</span>beligerent <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/as_adjacency_matrix">as_adj</a></span>(<span class="dt">sparse =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span>missSBM<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/missSBM/topics/sample">sample</a></span>(<span class="dt">sampling =</span> <span class="st">"node"</span>, <span class="dt">parameters =</span> <span class="fl">.6</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(sampledNet_war)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/sampling-1.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">vBlocks &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">collection_sbm &lt;-<span class="st"> </span>sampledNet_war<span class="op">$</span>adjMatrix <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span>missSBM<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/missSBM/topics/estimate">estimate</a></span>(<span class="dt">vBlocks =</span> vBlocks, <span class="dt">sampling =</span> <span class="st">"node"</span>, <span class="dt">clusterInit =</span> <span class="st">"spectral"</span>)</a></code></pre></div>
<pre><code>## 
## 
##  Adjusting Variational EM for Stochastic Block Model
## 
##  Imputation assumes a 'node' network-sampling process
## 
##  Initialization of model with 1 blocks. 
 Initialization of model with 2 blocks. 
 Initialization of model with 3 blocks. 
 Initialization of model with 4 blocks. 
 Initialization of model with 5 blocks. 
 Initialization of model with 6 blocks. 
##  Performing VEM inference for model with 1 blocks.
 Performing VEM inference for model with 2 blocks.
 Performing VEM inference for model with 3 blocks.
 Performing VEM inference for model with 4 blocks.
 Performing VEM inference for model with 5 blocks.
 Performing VEM inference for model with 6 blocks.</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(collection_sbm<span class="op">$</span>ICL, <span class="dt">type =</span> <span class="st">"l"</span>)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/inferencew-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../reference/smooth.html">smooth</a></span>(collection_sbm, <span class="st">"both"</span>, <span class="dt">iterates =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## 
##  Smoothing ICL
##    Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    
   Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    </code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(collection_sbm<span class="op">$</span>ICL, <span class="dt">type =</span> <span class="st">"l"</span>)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/smoothed-1.png" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(collection_sbm<span class="op">$</span>bestModel<span class="op">$</span>fittedSBM<span class="op">$</span>memberships)</a></code></pre></div>
<pre><code>## 
##  1  2  3 
## 10 73  9</code></pre>
<p>We compare with clusterings obtained with the fully observed network.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">collection_sbm_full &lt;-<span class="st"> </span>war_graphs<span class="op">$</span>beligerent <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/as_adjacency_matrix">as_adj</a></span>(<span class="dt">sparse =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span>missSBM<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/missSBM/topics/estimate">estimate</a></span>(<span class="dt">vBlocks =</span> vBlocks, <span class="st">"node"</span>, <span class="dt">clusterInit =</span> <span class="st">"hierarchical"</span>, <span class="dt">cores =</span> <span class="dv">2</span>, <span class="dt">trace =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## 
## 
##  Adjusting Variational EM for Stochastic Block Model
## 
##  Imputation assumes a 'node' network-sampling process</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="../reference/smooth.html">smooth</a></span>(collection_sbm_full, <span class="st">"both"</span>, <span class="dt">iterates =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## 
##  Smoothing ICL
##    Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    
   Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    </code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(collection_sbm_full<span class="op">$</span>ICL, <span class="dt">type =</span> <span class="st">"l"</span>)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/inferencewfull-1.png" width="700"></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">test =<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/as_adjacency_matrix">get.adjacency</a></span>(war_graphs<span class="op">$</span>beligerent))</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/isSymmetric">isSymmetric</a></span>(test)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">test[<span class="dv">1</span>,<span class="dv">2</span>] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/isSymmetric">isSymmetric</a></span>(test)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">collection_sbm_full2 &lt;-<span class="st"> </span>test <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span>missSBM<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/missSBM/topics/estimate">estimate</a></span>(<span class="dt">vBlocks =</span> vBlocks, <span class="st">"node"</span>, <span class="dt">clusterInit =</span> <span class="st">"spectral"</span>, <span class="dt">cores =</span> <span class="dv">2</span>, <span class="dt">trace =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## 
## 
##  Adjusting Variational EM for Stochastic Block Model
## 
##  Imputation assumes a 'node' network-sampling process</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw"><a href="../reference/smooth.html">smooth</a></span>(collection_sbm_full2, <span class="st">"both"</span>, <span class="dt">iterates =</span> <span class="dv">4</span>)</a></code></pre></div>
<pre><code>## 
##  Smoothing ICL
##    Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    
   Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    
   Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    
   Going forward +++++
                                                                                                    
   Going backward +++++
                                                                                                    </code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(collection_sbm_full2<span class="op">$</span>ICL)</a></code></pre></div>
<p><img src="introdution-to-misssbm_files/figure-html/inferencewfull-2.png" width="700"></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">  collection_sbm<span class="op">$</span>bestModel<span class="op">$</span>fittedSBM<span class="op">$</span>memberships,</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">  collection_sbm_full<span class="op">$</span>bestModel<span class="op">$</span>fittedSBM<span class="op">$</span>memberships</a>
<a class="sourceLine" id="cb35-4" data-line-number="4">  )</a></code></pre></div>
<pre><code>##    
##      1  2  3  4
##   1  0  7  0  3
##   2 26  0 47  0
##   3  3  3  1  2</code></pre>
<!-- ```{r blockmodelscomparison} -->
<!-- library(blockmodels) -->
<!-- modsym <- BM_bernoulli("SBM_sym",as.matrix(get.adjacency(war_graphs$beligerent)),verbosity=0,plotting="") -->
<!-- modsym$estimate() -->
<!-- plot(modsym$ICL) -->
<!-- mod <- BM_bernoulli("SBM",as.matrix(get.adjacency(war_graphs$beligerent)),verbosity=0,plotting="") -->
<!-- mod$estimate() -->
<!-- plot(mod$ICL) -->
<!-- ``` -->
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#requirement">Requirement</a></li>
      <li><a href="#war-network">War network</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Julien Chiquet, Timothée Tabouy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
